<script>
    // ⚠️ ПЕРЕВІРТЕ ГІЛКУ: 'main' або 'master'
    const BASE_AUDIO_URL = 'https://raw.githubusercontent.com/shylovak-spec/Audio_Assetss/main/'; 

    const firstAidAudios = [
        { name: "Вступ", fileName: "first_aid_vstup" },
        { name: "Зупинка кровообігу", fileName: "first_aid_circulation" },
        // ... (інші ваші об'єкти)
        { name: "Ураження електричним струмом", fileName: "first_aid_electric" }
    ];

    const container = document.getElementById('audio-list-container');
    let htmlContent = '';

    firstAidAudios.forEach((item, index) => {
        const itemId = `audio_${index}`;
        const speedId = `speed_${index}`;
        
        // Формуємо повні URL
        const mp3Src = `${BASE_AUDIO_URL}${item.fileName}.mp3`;
        const oggSrc = `${BASE_AUDIO_URL}${item.fileName}.ogg`;

        htmlContent += `
            <div class="audio-item">
                <h2>${index + 1}. ${item.name}</h2>
                <audio id="${itemId}" controls preload="metadata">
                    <source src="${mp3Src}" type="audio/mpeg">
                    <source src="${oggSrc}" type="audio/ogg">
                    Ваш браузер не підтримує аудіоформати MP3 чи OGG.
                </audio>
                <div class="speed-control">
                    <span>Швидкість:</span>
                    <div>
                        <span id="${speedId}" class="speed-display">1.00</span>
                        <button onclick="adjustSpeed('${itemId}', -0.25)">-</button>
                        <button onclick="adjustSpeed('${itemId}', 0.25)">+</button>
                    </div>
                </div>
            </div>
        `;
    });

    // Одноразове вставлення HTML, щоб уникнути помилок
    container.innerHTML = htmlContent; 

    function adjustSpeed(audioId, delta) {
        // Логіка adjustSpeed залишається тією самою
        const audio = document.getElementById(audioId);
        if (!audio) return; // Запобіжник на випадок, якщо елемент не знайдено
        
        const speedDisplay = document.getElementById(`speed_${audioId.split('_')[1]}`);
        if (!speedDisplay) return;

        let currentSpeed = Math.round(audio.playbackRate * 100) / 100;
        let newSpeed = currentSpeed + delta;

        if (newSpeed < 1.0) {
            newSpeed = 1.0;
        }
        if (newSpeed > 2.0) {
            newSpeed = 2.0;
        }

        audio.playbackRate = newSpeed;
        speedDisplay.textContent = newSpeed.toFixed(2);
    }
</script>
        `;
        container.innerHTML += itemHTML;
    });

    function adjustSpeed(audioId, delta) {
        const audio = document.getElementById(audioId);
        // Отримання індексу для оновлення відповідного speedDisplay
        const speedDisplay = document.getElementById(`speed_${audioId.split('_')[1]}`);
        
        let currentSpeed = Math.round(audio.playbackRate * 100) / 100;
        let newSpeed = currentSpeed + delta;

        if (newSpeed < 1.0) {
            newSpeed = 1.0;
        }
        if (newSpeed > 2.0) {
            newSpeed = 2.0;
        }

        audio.playbackRate = newSpeed;
        speedDisplay.textContent = newSpeed.toFixed(2);
    }
</script>
