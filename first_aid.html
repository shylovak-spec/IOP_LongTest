<script>
    // BASE URL для "сирих" файлів у репозиторії Audio_Assetss
    const BASE_AUDIO_URL = 'https://raw.githubusercontent.com/shylovak-spec/Audio_Assetss/main/'; 

    const firstAidAudios = [
        { name: "Вступ", fileName: "first_aid_vstup" },
        { name: "Зупинка кровообігу", fileName: "first_aid_circulation" },
        { name: "Кровотеча", fileName: "first_aid_bleeding" },
        { name: "Опік", fileName: "first_aid_burn" },
        { name: "Отруєння", fileName: "first_aid_poisoning" },
        { name: "Ушкодження очей", fileName: "first_aid_eyes" },
        { name: "Переломи", fileName: "first_aid_fractures" },
        { name: "Судоми", fileName: "first_aid_seizures" },
        { name: "Ураження електричним струмом", fileName: "first_aid_electric" }
    ];

    const container = document.getElementById('audio-list-container');
    
    // Запобіжник: перевірка, чи існує HTML-контейнер
    if (!container) {
        console.error('Не знайдено елемент #audio-list-container. Скрипт зупинено.');
        return; 
    }

    let htmlContent = '';

    // Динамічне створення HTML-елементів для кожного аудіофайлу
    firstAidAudios.forEach((item, index) => {
        const itemId = `audio_${index}`;
        const speedId = `speed_${index}`;
        
        // Формуємо повні Raw URL-адреси
        const mp3Src = `${BASE_AUDIO_URL}${item.fileName}.mp3`;
        const oggSrc = `${BASE_AUDIO_URL}${item.fileName}.ogg`;

        htmlContent += `
            <div class="audio-item">
                <h2>${index + 1}. ${item.name}</h2>
                <audio id="${itemId}" controls preload="metadata">
                    <source src="${mp3Src}" type="audio/mpeg">
                    <source src="${oggSrc}" type="audio/ogg">
                    Ваш браузер не підтримує аудіоформати MP3 чи OGG.
                </audio>
                <div class="speed-control">
                    <span>Швидкість:</span>
                    <div>
                        <span id="${speedId}" class="speed-display">1.00</span>
                        <button onclick="adjustSpeed('${itemId}', -0.25)">-</button>
                        <button onclick="adjustSpeed('${itemId}', 0.25)">+</button>
                    </div>
                </div>
            </div>
        `;
    });

    // Вставляємо згенерований HTML-код у контейнер
    container.innerHTML = htmlContent; 

    // Функція для зміни швидкості відтворення
    function adjustSpeed(audioId, delta) {
        const audio = document.getElementById(audioId);
        if (!audio) return; 
        
        // Отримуємо відповідний елемент для відображення швидкості
        const speedDisplay = document.getElementById(`speed_${audioId.split('_')[1]}`);
        if (!speedDisplay) return;

        let currentSpeed = Math.round(audio.playbackRate * 100) / 100;
        let newSpeed = currentSpeed + delta;

        // Обмеження швидкості (від 1.0 до 2.0)
        if (newSpeed < 1.0) {
            newSpeed = 1.0;
        }
        if (newSpeed > 2.0) {
            newSpeed = 2.0;
        }

        audio.playbackRate = newSpeed;
        speedDisplay.textContent = newSpeed.toFixed(2);
    }
</script>
